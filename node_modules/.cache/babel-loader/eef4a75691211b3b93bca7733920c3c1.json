{"ast":null,"code":"import _slicedToArray from\"D:/practice-projects/social-media-network/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState}from\"react\";import{getAuth,signInWithPopup,GoogleAuthProvider,signOut,onAuthStateChanged,updateProfile,createUserWithEmailAndPassword,signInWithEmailAndPassword}from\"firebase/auth\";import initialization from\"../firebase/firebase.init\";initialization();var useFirebase=function useFirebase(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var googleProvider=new GoogleAuthProvider();var auth=getAuth();// HANDLE SIGN IN WITH GOOGLE\nvar signInWithGoogle=function signInWithGoogle(){signInWithPopup(auth,googleProvider).then(function(result){setUser(result.user);}).catch(function(error){setError(error.message);});};// HANDLE USER REGISTER WITH EMAIL & PASSWORD ACCOUNT\nvar userRegister=function userRegister(name,email,password,location,history){setLoading(true);createUserWithEmailAndPassword(auth,email,password).then(function(result){var _location$state;setUser(result.user);setUserName(name);var destiny=(location===null||location===void 0?void 0:(_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.form)||'/';history.replace(destiny);}).catch(function(error){setError(error.message);}).finally(function(){return setLoading(false);});};// SET USER NAME\nvar setUserName=function setUserName(name){updateProfile(auth.currentUser,{displayName:name}).then(function(){// Profile updated!\n// ...\n}).catch(function(error){// An error occurred\n// ...\n});};// HANDLE USER LOGIN WITH EMAIL & PASSWORD\nvar userLogin=function userLogin(email,password,location,history){setLoading(true);signInWithEmailAndPassword(auth,email,password,location,history).then(function(result){var _location$state2;setUser(result.user);var destiny=(location===null||location===void 0?void 0:(_location$state2=location.state)===null||_location$state2===void 0?void 0:_location$state2.form)||'/';history.replace(destiny);}).catch(function(error){setError(error.message);}).finally(function(){return setLoading(false);});};// SAVE USER BEHAVIOUR\nuseEffect(function(){setLoading(true);var unsubscribe=onAuthStateChanged(auth,function(user){if(user){setUser(user);}else{setUser({});}setLoading(false);});return function(){return unsubscribe;};},[]);// HANDLE SIGN OUT\nvar logOut=function logOut(){setLoading(true);signOut(auth).then(function(){// Sign-out successful.\nsetLoading(false);}).catch(function(error){// An error happened.\nsetError(error.message);});};return{user:user,error:error,loading:loading,signInWithGoogle:signInWithGoogle,userRegister:userRegister,userLogin:userLogin,logOut:logOut};};export default useFirebase;","map":{"version":3,"sources":["D:/practice-projects/social-media-network/src/hooks/useFirebase.js"],"names":["useEffect","useState","getAuth","signInWithPopup","GoogleAuthProvider","signOut","onAuthStateChanged","updateProfile","createUserWithEmailAndPassword","signInWithEmailAndPassword","initialization","useFirebase","user","setUser","error","setError","loading","setLoading","googleProvider","auth","signInWithGoogle","then","result","catch","message","userRegister","name","email","password","location","history","setUserName","destiny","state","form","replace","finally","currentUser","displayName","userLogin","unsubscribe","logOut"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { getAuth, signInWithPopup, GoogleAuthProvider, signOut, onAuthStateChanged, updateProfile, createUserWithEmailAndPassword, signInWithEmailAndPassword } from \"firebase/auth\";\r\nimport initialization from \"../firebase/firebase.init\";\r\n\r\ninitialization();\r\nconst useFirebase = () => {\r\n    const [user, setUser] = useState({});\r\n    const [error, setError] = useState('');\r\n    const [loading, setLoading] = useState(true);\r\n\r\n\r\n    const googleProvider = new GoogleAuthProvider();\r\n    const auth = getAuth();\r\n\r\n    // HANDLE SIGN IN WITH GOOGLE\r\n    const signInWithGoogle = () => {\r\n        signInWithPopup(auth, googleProvider)\r\n            .then((result) => {\r\n                setUser(result.user);\r\n            }).catch((error) => {\r\n                setError(error.message);\r\n            });\r\n    };\r\n\r\n\r\n    // HANDLE USER REGISTER WITH EMAIL & PASSWORD ACCOUNT\r\n    const userRegister = (name, email, password, location, history) => {\r\n        setLoading(true)\r\n        createUserWithEmailAndPassword(auth, email, password)\r\n            .then((result) => {\r\n                setUser(result.user);\r\n                setUserName(name)\r\n                const destiny = location?.state?.form || '/';\r\n                history.replace(destiny)\r\n            })\r\n            .catch((error) => {\r\n                setError(error.message);\r\n            })\r\n            .finally(() => setLoading(false));\r\n    }\r\n\r\n\r\n\r\n    // SET USER NAME\r\n    const setUserName = (name) => {\r\n        updateProfile(auth.currentUser, {\r\n            displayName: name\r\n        }).then(() => {\r\n            // Profile updated!\r\n            // ...\r\n        }).catch((error) => {\r\n            // An error occurred\r\n            // ...\r\n        });\r\n\r\n    }\r\n\r\n\r\n    // HANDLE USER LOGIN WITH EMAIL & PASSWORD\r\n    const userLogin = (email, password, location, history) => {\r\n        setLoading(true)\r\n        signInWithEmailAndPassword(auth, email, password, location, history)\r\n            .then((result) => {\r\n                setUser(result.user);\r\n                const destiny = location?.state?.form || '/';\r\n                history.replace(destiny)\r\n            })\r\n            .catch((error) => {\r\n                setError(error.message);\r\n            })\r\n            .finally(() => setLoading(false));\r\n    }\r\n\r\n\r\n    // SAVE USER BEHAVIOUR\r\n    useEffect(() => {\r\n        setLoading(true)\r\n        const unsubscribe = onAuthStateChanged(auth, (user) => {\r\n            if (user) {\r\n                setUser(user)\r\n            } else {\r\n                setUser({})\r\n            }\r\n            setLoading(false)\r\n        });\r\n        return () => unsubscribe;\r\n    }, []);\r\n\r\n\r\n    // HANDLE SIGN OUT\r\n    const logOut = () => {\r\n        setLoading(true)\r\n        signOut(auth).then(() => {\r\n            // Sign-out successful.\r\n            setLoading(false)\r\n        }).catch((error) => {\r\n            // An error happened.\r\n            setError(error.message);\r\n        });\r\n    }\r\n\r\n\r\n    return {\r\n        user,\r\n        error,\r\n        loading,\r\n        signInWithGoogle,\r\n        userRegister,\r\n        userLogin,\r\n        logOut\r\n    }\r\n};\r\n\r\nexport default useFirebase;"]},"metadata":{},"sourceType":"module"}