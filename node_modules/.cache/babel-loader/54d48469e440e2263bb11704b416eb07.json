{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport { getAuth, signInWithPopup, GoogleAuthProvider, signOut, onAuthStateChanged, updateProfile, createUserWithEmailAndPassword, signInWithEmailAndPassword } from \"firebase/auth\";\nimport initialization from \"../firebase/firebase.init\";\ninitialization();\n\nconst useFirebase = () => {\n  _s();\n\n  const [user, setUser] = useState({});\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(true);\n  const googleProvider = new GoogleAuthProvider();\n  const auth = getAuth(); // HANDLE SIGN IN WITH GOOGLE\n\n  const signInWithGoogle = () => {\n    signInWithPopup(auth, googleProvider).then(result => {\n      setUser(result.user);\n    }).catch(error => {\n      setError(error.message);\n    });\n  }; // HANDLE USER REGISTER WITH EMAIL & PASSWORD ACCOUNT\n\n\n  const userRegister = (name, email, password, username, gander, location, history) => {\n    setLoading(true);\n    createUserWithEmailAndPassword(auth, email, password).then(result => {\n      var _location$state;\n\n      setUser(result.user);\n      setUserName(name);\n      saveUser(name, email, username, gander);\n      const destiny = (location === null || location === void 0 ? void 0 : (_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.form) || '/';\n      history.replace(destiny);\n    }).catch(error => {\n      setError(error.message);\n    }).finally(() => setLoading(false));\n  }; // SAVE USER TO DATABASE\n\n\n  const saveUser = (name, email, username, gender) => {\n    fetch('http://localhost:5000/users', {\n      method: 'POST',\n      headers: {\n        'content-type': 'application/json'\n      },\n      body: JSON.stringify(user)\n    }).then(res => res.json()).then(data => {\n      console.log(data);\n    });\n  }; // SET USER NAME\n\n\n  const setUserName = name => {\n    updateProfile(auth.currentUser, {\n      displayName: name\n    }).then(() => {// Profile updated!\n      // ...\n    }).catch(error => {// An error occurred\n      // ...\n    });\n  }; // HANDLE USER LOGIN WITH EMAIL & PASSWORD\n\n\n  const userLogin = (email, password, location, history) => {\n    setLoading(true);\n    signInWithEmailAndPassword(auth, email, password, location, history).then(result => {\n      var _location$state2;\n\n      setUser(result.user);\n      const destiny = (location === null || location === void 0 ? void 0 : (_location$state2 = location.state) === null || _location$state2 === void 0 ? void 0 : _location$state2.form) || '/';\n      history.replace(destiny);\n    }).catch(error => {\n      setError(error.message);\n    }).finally(() => setLoading(false));\n  }; // SAVE USER BEHAVIOUR\n\n\n  useEffect(() => {\n    setLoading(true);\n    const unsubscribe = onAuthStateChanged(auth, user => {\n      if (user) {\n        setUser(user);\n      } else {\n        setUser({});\n      }\n\n      setLoading(false);\n    });\n    return () => unsubscribe;\n  }, []); // HANDLE SIGN OUT\n\n  const logOut = () => {\n    setLoading(true);\n    signOut(auth).then(() => {\n      // Sign-out successful.\n      setLoading(false);\n    }).catch(error => {\n      // An error happened.\n      setError(error.message);\n    });\n  };\n\n  return {\n    user,\n    error,\n    loading,\n    signInWithGoogle,\n    userRegister,\n    userLogin,\n    logOut\n  };\n};\n\n_s(useFirebase, \"WQ+I9t0j+6k/QxOHXnCEo0uxtXs=\");\n\nexport default useFirebase;","map":{"version":3,"sources":["D:/practice-projects/social-media-network/src/hooks/useFirebase.js"],"names":["useEffect","useState","getAuth","signInWithPopup","GoogleAuthProvider","signOut","onAuthStateChanged","updateProfile","createUserWithEmailAndPassword","signInWithEmailAndPassword","initialization","useFirebase","user","setUser","error","setError","loading","setLoading","googleProvider","auth","signInWithGoogle","then","result","catch","message","userRegister","name","email","password","username","gander","location","history","setUserName","saveUser","destiny","state","form","replace","finally","gender","fetch","method","headers","body","JSON","stringify","res","json","data","console","log","currentUser","displayName","userLogin","unsubscribe","logOut"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { getAuth, signInWithPopup, GoogleAuthProvider, signOut, onAuthStateChanged, updateProfile, createUserWithEmailAndPassword, signInWithEmailAndPassword } from \"firebase/auth\";\r\nimport initialization from \"../firebase/firebase.init\";\r\n\r\ninitialization();\r\nconst useFirebase = () => {\r\n    const [user, setUser] = useState({});\r\n    const [error, setError] = useState('');\r\n    const [loading, setLoading] = useState(true);\r\n\r\n\r\n    const googleProvider = new GoogleAuthProvider();\r\n    const auth = getAuth();\r\n\r\n    // HANDLE SIGN IN WITH GOOGLE\r\n    const signInWithGoogle = () => {\r\n        signInWithPopup(auth, googleProvider)\r\n            .then((result) => {\r\n                setUser(result.user);\r\n            }).catch((error) => {\r\n                setError(error.message);\r\n            });\r\n    };\r\n\r\n\r\n    // HANDLE USER REGISTER WITH EMAIL & PASSWORD ACCOUNT\r\n    const userRegister = (name, email, password, username, gander, location, history) => {\r\n        setLoading(true)\r\n        createUserWithEmailAndPassword(auth, email, password)\r\n            .then((result) => {\r\n                setUser(result.user);\r\n                setUserName(name)\r\n                saveUser(name, email, username, gander,)\r\n                const destiny = location?.state?.form || '/';\r\n                history.replace(destiny)\r\n            })\r\n            .catch((error) => {\r\n                setError(error.message);\r\n            })\r\n            .finally(() => setLoading(false));\r\n    }\r\n\r\n\r\n    // SAVE USER TO DATABASE\r\n    const saveUser = (name, email, username, gender) => {\r\n        fetch('http://localhost:5000/users', {\r\n            method: 'POST',\r\n            headers: { 'content-type': 'application/json' },\r\n            body: JSON.stringify(user)\r\n        })\r\n            .then(res => res.json())\r\n            .then(data => {\r\n                console.log(data);\r\n            })\r\n    };\r\n\r\n\r\n    // SET USER NAME\r\n    const setUserName = (name) => {\r\n        updateProfile(auth.currentUser, {\r\n            displayName: name\r\n        }).then(() => {\r\n            // Profile updated!\r\n            // ...\r\n        }).catch((error) => {\r\n            // An error occurred\r\n            // ...\r\n        });\r\n\r\n    }\r\n\r\n\r\n    // HANDLE USER LOGIN WITH EMAIL & PASSWORD\r\n    const userLogin = (email, password, location, history) => {\r\n        setLoading(true)\r\n        signInWithEmailAndPassword(auth, email, password, location, history)\r\n            .then((result) => {\r\n                setUser(result.user);\r\n                const destiny = location?.state?.form || '/';\r\n                history.replace(destiny)\r\n            })\r\n            .catch((error) => {\r\n                setError(error.message);\r\n            })\r\n            .finally(() => setLoading(false));\r\n    }\r\n\r\n\r\n    // SAVE USER BEHAVIOUR\r\n    useEffect(() => {\r\n        setLoading(true)\r\n        const unsubscribe = onAuthStateChanged(auth, (user) => {\r\n            if (user) {\r\n                setUser(user)\r\n            } else {\r\n                setUser({})\r\n            }\r\n            setLoading(false)\r\n        });\r\n        return () => unsubscribe;\r\n    }, []);\r\n\r\n\r\n\r\n    // HANDLE SIGN OUT\r\n    const logOut = () => {\r\n        setLoading(true)\r\n        signOut(auth).then(() => {\r\n            // Sign-out successful.\r\n            setLoading(false)\r\n        }).catch((error) => {\r\n            // An error happened.\r\n            setError(error.message);\r\n        });\r\n    }\r\n\r\n\r\n    return {\r\n        user,\r\n        error,\r\n        loading,\r\n        signInWithGoogle,\r\n        userRegister,\r\n        userLogin,\r\n        logOut\r\n    }\r\n};\r\n\r\nexport default useFirebase;"]},"metadata":{},"sourceType":"module"}